/*!  1.6.60 2022-04-22 11:36 */
!function(t,e){e.fn.datepicker&&(t.Datepicker=function(t){this.$el=t;t={dateFormat:this.$el.data("format")||"MM d, yy",minDate:this.$el.data("min-date")||"",beforeShow:function(t,a){e("#ui-datepicker-div").addClass("charitable-datepicker-table")}};this.$el.datepicker(t),this.$el.data("date")&&this.$el.datepicker("setDate",this.$el.data("date")),this.$el.data("min-date")&&this.$el.datepicker("option","minDate",this.$el.data("min-date"))})}(CHARITABLE_ADMIN=window.CHARITABLE_ADMIN||{},jQuery),function(t,o){t.Settings=function(t){var n=[],e=(show_setting=function(t,a){var e="!"===t[0],t=e?t.slice(1):t,a="checked"===t?a.is(":checked"):"selected"===t?a.selected():a.val()===t;return e?!a:a},toggle_setting=function(t,a){var e=(e=(n=t).parents("tr")).length?e.first():n,n=get_setting_value(t),t=show_setting(n,a);e.toggle(t)},get_setting_value=function(t){var a=t.data("trigger-value");return a=void 0===a?t.data("show-only-if-value"):a},toggle_options=function(t,a){var e,n=a.val(),i=t.data("trigger-value");("radio"!==a.attr("type")||a.prop("checked"))&&i.hasOwnProperty(n)&&(e=i[n],t.find("input").each(function(){var t=o(this),a=!(t.val()in e);a&&t.prop("checked",!1),t.prop("disabled",a).trigger("change")}))},get_trigger_id=function(t){var a=t.data("trigger-key");return a=void 0===a?"#"+t.data("show-only-if-key"):a},get_trigger=function(t){return"#"===t[0]?o(t):o('[name="'+t+'"]')},get_change_type=function(t){t=t.data("trigger-change-type");return t=void 0===t?"visibility":t},on_change=function(){var e=o(this);e.data("trigger_idx").forEach(function(t){n[t].settings.forEach(function(t){var a=get_change_type(t);"visibility"===a?toggle_setting(t,e):"options"===a&&toggle_options(t,e)})})},this.$el=t,0);this.$el.find("[data-trigger-key],[data-show-only-if-key]").each(function(){var t=o(this),a=get_trigger_id(t);n[a];void 0===n[a]&&(n[e]={trigger_id:a,settings:[]}),n[e].settings.push(t),e+=1}),n.forEach(function(t,a){var t=get_trigger(t.trigger_id),e=t.data("trigger_idx");(e=void 0===e?[]:e).push(a),t.data("trigger_idx",e),t.on("change",on_change),t.trigger("change")})}}(CHARITABLE_ADMIN,jQuery),function(s){function r(){var t=s("#campaign_allow_custom_donations"),a=1<(a=s(".charitable-campaign-suggested-donations tbody tr:not(.to-copy)")).length||!1===a.first().hasClass("no-suggested-amounts");t.prop("disabled",!a),a||t.prop("checked",!0)}function d(){s(".charitable-campaign-suggested-donations tbody").each(function(){s(this).children("tr").not(".no-suggested-amounts .to-copy").each(function(a){s(this).data("index",a),s(this).find("input").each(function(t){this.name=this.name.replace(/(\[\d\])/,"["+a+"]")})})})}function l(){var n;s(".charitable-admin-donation-form #donor-id").on("change",function(){var a,e,t=s(this).val();""!==t&&"new"!==t&&((a=s("#charitable-user-fields-wrap")).addClass("loading-data"),data={action:"charitable_get_donor_data",donor_id:t,fields:("object"==typeof n||(n=[],s("#charitable-user-fields-wrap").find("select,input,textarea").each(function(){n.push(this.name)})),n),nonce:s(this).data("nonce")},s.ajax({type:"POST",data:data,dataType:"json",url:ajaxurl,xhrFields:{withCredentials:!0},success:function(t){if(t.success)for(e in t.data)a.find("[name="+e+"]").val(t.data[e]);a.removeClass("loading-data")}}).fail(function(t){window.console&&window.console.log&&(console.log(t),a.removeClass("loading-data"))}))})}function h(){"undefined"!=typeof accounting&&(s("body").on("change",".currency-input",function(){t=s(this).val();var t=Math.abs(parseFloat(accounting.unformat(t,CHARITABLE.currency_format_decimal_sep)));0<s.trim(t)&&s(this).val(accounting.formatMoney(t,{symbol:"",decimal:CHARITABLE.currency_format_decimal_sep,thousand:CHARITABLE.currency_format_thousand_sep,precision:CHARITABLE.currency_format_num_decimals,format:CHARITABLE.currency_format}).trim())}),s(".currency-input").trigger("change"))}s(document).ready(function(){var t,a,e,n,i,o,c;CHARITABLE_ADMIN.Datepicker&&s(".charitable-datepicker").each(function(){CHARITABLE_ADMIN.Datepicker(s(this))}),s("#charitable-settings, body.post-type-campaign form#post, body.post-type-donation form#post").each(function(){CHARITABLE_ADMIN.Settings(s(this))}),s("body.post-type-campaign .handlediv, body.post-type-donation .handlediv").remove(),s("body.post-type-campaign .hndle, body.post-type-donation .hndle").removeClass("hndle ui-sortable-handle").addClass("postbox-title"),(t=s("#charitable-campaign-advanced-metabox")).tabs(),a=t.find(".charitable-tabs").height(),t.find(".ui-tabs-panel").each(function(){s(this).css("min-height",a)}),s(".charitable-campaign-suggested-donations tbody").sortable({items:"tr:not(.to-copy)",handle:".handle",stop:function(t,a){d()}}),r(),s("[data-charitable-action]").on("click",function(t){var a=s(this).data("charitable-args")||{},e="charitable-"+s(this).data("charitable-action");return s.post(ajaxurl,{action:e,data:a},function(t){console.log("Response: "+t)}),!1}),s("[data-charitable-toggle]").on("click",function(t){var a=s(this).data("charitable-toggle"),e=s(this).attr("data-charitable-toggle-text");return e&&e.length&&(s(this).attr("data-charitable-toggle-text",s(this).text()),s(this).text(e)),s("#"+a).toggle(),!1}),(e=s("#charitable_dashboard_donations")).length&&s.ajax({type:"GET",data:{action:"charitable_load_dashboard_donations_widget"},url:ajaxurl,success:function(t){e.find(".inside").html(t)}}),s("#campaign_end_date").on("change",function(){var t=s(this),a=t.val(),e=t.siblings(".charitable-end-time"),t=t.siblings("#campaign_end_time");""!==a&&a?(e.text("@ 23:59 PM").show(),t.val("23:59:59")):(e.hide(),t.val(0))}),(c=s(".charitable-actions-form-wrapper")).length&&(n=c.find(".charitable-action-select"),i=c.find(".charitable-actions-submit"),o=i.find("button"),i.hide(),n.on("change",function(){var a=n.val(),t=n.find("option:selected").data("button-text");""===a?i.hide():(c.find(".charitable-action-fields").each(function(){var t=s(this);t.toggle(a===t.data("type"))}),t?o.text(t):o.text(o.prop("title")),i.show())})),s.fn.select2&&s(".select2 select, select.select2").select2(),l(),h(),s("[data-charitable-add-row]").on("click",function(){var t,a;return"suggested-amount"===s(this).data("charitable-add-row")&&(t=(t=s(this)).closest(".charitable-campaign-suggested-donations").find("tbody"),a=t.find("tr.to-copy").clone().removeClass("to-copy hidden"),t.find(".no-suggested-amounts").hide(),t.append(a),d(),r()),!1}),s(".charitable-campaign-suggested-donations").on("click",".charitable-delete-row",function(){console.log("clicked");var t=s(this);return console.log(t),t.closest("tr").remove(),1==(t=t.closest(".charitable-campaign-suggested-donations").find("tbody")).find("tr:not(.to-copy)").length&&t.find(".no-suggested-amounts").removeClass("hidden").show(),d(),r(),!1}),s("body").on("click","[data-campaign-benefactor-delete]",function(){var a=s(this).parents(".charitable-benefactor"),t={action:"charitable_delete_benefactor",benefactor_id:s(this).data("campaign-benefactor-delete"),nonce:s(this).data("nonce")};return s.ajax({type:"POST",data:t,dataType:"json",url:ajaxurl,xhrFields:{withCredentials:!0},success:function(t){t.deleted&&a.remove()}}).fail(function(t){window.console&&window.console.log&&(console.log("failture"),console.log(t))}),!1}),s("#change-donation-status").on("change",function(){s(this).parents("form").submit()})})}(jQuery);